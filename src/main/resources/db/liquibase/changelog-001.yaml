databaseChangeLog:
-  changeSet:
      id: drop-signin-table
      author: umang
      preConditions:
      -  onFail: MARK_RAN
      -  tableExists:
            tableName: signin_details
      changes:
      -  dropTable:
            cascadeConstraints: true
            tableName: signin_details
-  changeSet:
      id: create-user
      author: umang
      changes:
      -  createTable:
            columns:
            -  column:
                  autoIncrement: true
                  constraints:
                     nullable: false
                     primaryKey: true
                  name: id
                  type: INT
            -  column:
                  constraints:
                     unique: true
                  name: email
                  type: VARCHAR(45)
            -  column:
                  name: role
                  type: VARCHAR(45)
            -  column:
                  name: password
                  type: VARCHAR(70)
            tableName: user
-  changeSet:
      id: insert-data-in-user
      author: umang
      changes:
      -  insert:
            tableName: user
            columns:
            -  column:
                  name: email
                  value: abc@gmail.com
            -  column:
                  name: password
                  value: 12345
            rollback:
            -  sql:
                  sql: delete from user;
            tableName: user
- changeSet:
    id: rename-role-user-table
    author: umang
    changes:
      - renameColumn:  
          columnDataType:  int  
          newColumnName:  role_id  
          oldColumnName:  role  
          tableName:  user
- changeSet:
    id: drop-if-exits-user_created
    author: umang
    preConditions:
      -  onFail: MARK_RAN
      -  tableExists:
            tableName: user_created
    changes:
      -  dropTable:
          cascadeContraints: true
          tableName: user_created
- changeSet:
    id: create user_created
    author: umang 
    changes:   
    -  createTable:
        columns:
        -  column:
             autoIncrement: true
             constraints: 
               nullable: false
               primaryKey: true
             name: id
             type: INT
        -  column:
             name: user_id
             type: INT 
        -  column:
             name: creater_id
             type: INT
        -  column:
             defaultValueComputed: CURRENT_TIMESTAMP
             name: date_created
             type: timestamp
        tableName: user_created 
-  changeSet:
    id: foreign-key-for-user_created
    author: umang
    changes:
    -  addForeignKeyConstraint:
            baseColumnNames: user_id
            baseTableName: user_created
            constraintName: user_detail_fk
            deferrable: false
            initiallyDeferred: false
            onDelete: CASCADE
            onUpdate: RESTRICT
            referencedColumnNames: id
            referencedTableName: user
            validate: true    
-  changeSet:
      id: foreign-key-for-user_created-2
      author: umang
      changes:
      -  addForeignKeyConstraint:
            baseColumnNames: creater_id
            baseTableName: user_created
            constraintName: user_created_by_fk
            deferrable: false
            initiallyDeferred: false
            onDelete: Restrict
            onUpdate: RESTRICT
            referencedColumnNames: id
            referencedTableName: user
            validate: true    
-  changeSet:
      id: drop-roles-table
      author: umang
      preConditions:
      -  onFail: MARK_RAN
      -  tableExists:
            tableName: roles
      changes:
      -  dropTable:
            cascadeConstraints: true
            tableName: roles
- changeSet:
      id: create-roles
      author: umang
      changes:
      -  createTable:
            columns:
            -  column:
                  autoIncrement: true
                  constraints:
                     nullable: false
                     primaryKey: true
                  name: id
                  type: int
            -  column:
                  constraints:
                     unique: true
                  name: role
                  type: varchar(45)
            tableName: roles
-  changeSet:
      id: foreign-key-role_id-user
      author: umang
      changes:
      -  addForeignKeyConstraint:
            baseColumnNames: role_id
            baseTableName: user
            constraintName: user_role_id_fk
            deferrable: false
            initiallyDeferred: false
            onDelete: set null
            onUpdate: RESTRICT
            referencedColumnNames: id
            referencedTableName: roles
            validate: true    
-  changeSet:
      id: insert-roles-1
      author: umang
      changes:
      -  insert:
            tableName: roles
            columns:
            -  column:
                  name: role
                  value: principal
-  changeSet:
      id: insert-roles-2
      author: umang
      changes:
      -  insert:
            tableName: roles
            columns:
            -  column:
                  name: role
                  value: teacher
-  changeSet:
      id: insert-roles-3
      author: umang
      changes:
      -  insert:
            tableName: roles
            columns:
            -  column:
                  name: role
                  value: student
-  changeSet:  
      id:  update-user  
      author:  umang  
      changes:  
      -  update:  
          columns:  
          -  column:  
              name:  role_id  
              value:  1  
          tableName:  user  
          where:  id=1
#-  changeSet:
#     id: addColumn-user
#     author: umang
#     changes:
#      - addColumn:
#         tableName: user
#         columns:
#            - column:
#                name: firstname
#                type: varchar(45)  
#            - column:
#                name: lastname
#                type: varchar(45)
#-  changeSet:  
#      id:  update-firstname-user  
#      author:  umang  
#      changes:  
#      -  update:  
#          columns:  
#          -  column:  
#              name:  firstname  
#              value:  dhairya
#          -  column:  
#              name:  lastname  
#              value:  shah
#          tableName:  user  
#          where:  id=1